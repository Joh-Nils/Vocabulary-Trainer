<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login / Signup Page</title>
    <style>
        body {
          font-family: Arial, sans-serif;
          background: #f0f2f5;
          display: flex;
          justify-content: center;
          align-items: center;
          height: 100vh;
          margin: 0;
        }

        .container {
          background: white;
          padding: 2rem;
          border-radius: 10px;
          box-shadow: 0 4px 10px rgba(0,0,0,0.1);
          width: 300px;
        }

        h2 {
          text-align: center;
          margin-bottom: 1.5rem;
        }

        input, button {
          width: 100%;
          padding: 12px;
          margin: 8px 0;
          border-radius: 5px;
          font-size: 16px;
          box-sizing: border-box;
        }

        input {
          border: 1px solid #ccc;
        }

        button {
          background: #007bff;
          color: white;
          border: none;
          cursor: pointer;
        }

        button:hover {
          background: #0056b3;
        }

        .toggle-link {
          text-align: center;
          margin-top: 10px;
          color: #007bff;
          cursor: pointer;
        }

        .toggle-link:hover {
          text-decoration: underline;
        }

        #responseMsg {
          text-align: center;
          color: red;
        }
    </style>
</head>
<body>
<div class="container">
    <h2 id="formTitle">Login</h2>
    <form id="authForm">
        <input type="text" id="username" placeholder="Username" required>
        <input type="password" id="password" placeholder="Password" required>
        <button type="submit" id="submitBtn">Login</button>
    </form>
    <p id="responseMsg"></p>
    <p class="toggle-link" id="toggleForm">Don't have an account? Sign up</p>
</div>

<script>
    const form = document.getElementById("authForm");
    const responseMsg = document.getElementById("responseMsg");
    const toggleLink = document.getElementById("toggleForm");
    const formTitle = document.getElementById("formTitle");
    const submitBtn = document.getElementById("submitBtn");

    let isLogin = true;

    toggleLink.addEventListener("click", () => {
      isLogin = !isLogin;
      if (isLogin) {
        formTitle.textContent = "Login";
        submitBtn.textContent = "Login";
        toggleLink.textContent = "Don't have an account? Sign up";
      } else {
        formTitle.textContent = "Create Account";
        submitBtn.textContent = "Sign Up";
        toggleLink.textContent = "Already have an account? Login";
      }
      responseMsg.textContent = "";
    });

    form.addEventListener("submit", async (e) => {
      e.preventDefault();

      const username = document.getElementById("username").value;
      const password = document.getElementById("password").value;
      const endpoint = isLogin ? "/auth/login" : "/auth/create";

      try {
        const res = await fetch(endpoint, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ username, password })
        });

        if (res.ok) {
            window.location.href = "/dashboard";
        } else {
          responseMsg.style.color = "red";
          responseMsg.textContent = isLogin ? "Invalid username or password." : "Error creating account.";
        }
      } catch (error) {
        responseMsg.style.color = "red";
        responseMsg.textContent = "Error connecting to server.";
      }
    });
</script>
</body>
</html>
